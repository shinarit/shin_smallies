snake implementation, with arbitrary number of panels for easier control
